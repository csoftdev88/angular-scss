<header grid-row ng-if="locationDetails">
  <h1 grid="6">{{locationDetails.nameShort}}</h1>
  <local-info local-info="locationDetails.localInfo" grid="6"></local-info>
</header>

<section grid-row ng-if="locationDetails">
  <div grid="8">
    <p>{{locationDetails.description}}</p>
    <a href ng-click="openLocationDetail(locationDetails)">Learn more about {{locationDetails.nameShort}}</a>
  </div>
  <view-more-images grid="4" class="has-no-link">
    <img ng-src="{{locationDetails.images[0].uri}}" alt="{{locationDetails.images[0].alt}}" err-source="http://lorempixel.com/390/110/"/>
  </view-more-images>
</section>

<div class="grid-wrapper">
  <section grid-container="9" widget="hotels">
    <header class="hotels__header">
      <h1>Our <strong>Hotels</strong></h1>
      <!--<p>{{(hotels | filter : hotelFilter).length | pluralization: {'0': 'No hotel available', '1': '{} hotel available', 'plural': '{} hotels available'} }}</p>-->
    </header>
    <div class="hotels__controls">
      <div class="order-switch">
        <select name="sorting" ng-model="currentOrder" chosen ng-options="option.name for option in sortingOptions" data-placeholder="Sorting">
          <option></option> <!-- workaround for a bug in angular-chosen -->
        </select>
      </div>
    </div>
    <div ng-if="!isUserLoggedIn()" class="msg-box" ng-click="sso.login()">Save up to 20% by signing in or registering!</div>
    <div class="hotels__list">
      <section ng-show="hotels.length === 0">_no_hotels_found_</section>
      <ul class="entries entries--{{preference.get('hotels-view-mode')}}">
        <li class="item" ng-repeat="hotel in hotels | filter : hotelFilter | orderBy : currentOrder.prop: currentOrder.value" ng-click="navigateToHotel(hotel.code)" grid="{{preference.get('hotels-view-mode') === 'list' ? 3 : 1}}">
          <a href="">
            <div class="item-image">
              <img ng-src="{{hotel.images[0].uri}}" alt="Mobius hotel {{hotel.name}} photo"/>
            </div>

            <div class="ratings">
              <div class="stars rating-trip-advisor">
                <ul class="stars-left">
                  <li ng-repeat="rating in [1,2,3,4,5]" ng-class="{included: rating <= hotel.tripAdvisorRating}"></li>
                </ul>
              </div>

              <div class="rating-default">
                <ul class="star-rating">
                  <li ng-repeat="i in [1,2,3,4,5]" ng-class="{'included': i <= hotel.rating}"></li>
                </ul>
              </div>
            </div>

            <h2>The Sutton Place Hotel <strong>{{hotel.nameShort}}</strong></h2>
            <pricing-info>
              <p ng-if="hotel.available">
                from <span class="value">{{hotel.priceFrom | i18nCurrency: $root.currencyCode}}</span> per night
                <span ng-if="hotel.available && isUserLoggedIn()">
                  <br />or <span class="value">{{hotel.minPointsRequired}}</span> points
                </span>
              </p>
              <p class="price unavailable" ng-if="!hasDates()">
                Please select your dates to see latest prices
              </p>

              <p class="price unavailable" ng-if="!hotel.available && hasDates()">
                Not Available On Selected Dates
              </p>
            </pricing-info>
            <p class="description">{{hotel.descriptionShort}}</p>
          </a>
        </li>
      </ul>
    </div>
  </section>

  <aside grid-container="3" class="hotels__filter">
    <div class="view-switch">
      <h2>View</h2>
      <ul>
        <li ng-class="{'is-active': preference.get('hotels-view-mode') === 'list'}" ng-click="preference.set('hotels-view-mode', 'list')">
          <i class="fa fa-th-list"  title="Show as list" /> List
        </li>
        <li ng-class="{'is-active': preference.get('hotels-view-mode') === 'tiles'}" ng-click="preference.set('hotels-view-mode', 'tiles')">
          <i class="fa fa-th-large" title="Show as tiles" /> Grid
        </li>
      </ul>
    </div>
    <div class="filters-bar">
      <div ng-if="hasDates()">
        <h2>Filter</h2>
        <h3>Price per night</h3>
        <div
          range-slider
          min="minPrice"
          max="maxPrice"
          model-min="minSelectedPrice"
          model-max="maxSelectedPrice"
          show-values="true"
          filter="i18nCurrency"
          filter-options="{{$root.currencyCode}}"
          attach-handle-values="true"></div>
        <hr>
      </div>
      <h3>Star Rating</h3>
      <div class="stars">
        <ul class="stars-left">
          <li ng-repeat="stars in [1,2,3,4,5]" ng-click="setMinStars(stars)" ng-class="{included: stars <= minStars}"></li>
        </ul>
        to
        <ul class="stars-right">
          <li ng-repeat="stars in [1,2,3,4,5]" ng-click="setMaxStars(stars)" ng-class="{included: stars <= maxStars}"></li>
        </ul>
      </div>
      <hr>
      <h3><i class="logo-trip-advisor"></i> Rating</h3>
      <div class="stars rating-trip-advisor">
        <ul class="stars-left">
          <li ng-repeat="rating in [1,2,3,4,5]" ng-click="setMinRating(rating)" ng-class="{included: rating <= minRating}"></li>
        </ul>
        to
        <ul class="stars-right">
          <li ng-repeat="rating in [1,2,3,4,5]" ng-click="setMaxRating(rating)" ng-class="{included: rating <= maxRating}"></li>
        </ul>
      </div>
      <hr>
      <!-- Out of scope now -->
      <!--<h3>Amenities</h3>-->
      <!--<hr>-->
      <!-- <h3>Location</h3>
      <select name="location" ng-model="location" data-placeholder="Select a location" chosen ng-options="location.nameShort for location in locations" ng-change="loadLocation()">
        <option></option> --> <!-- workaround for a bug in angular-chosen -->
      <!-- </select> -->
    </div>
  </aside>
</div>
