<header grid-row ng-if="locationDetails">
  <h1 grid="6">{{locationDetails.nameShort}}</h1>
  <local-info local-info="locationDetails.localInfo" grid="6"></local-info>
</header>

<section grid-row ng-if="locationDetails">
  <div grid="8">
    <p>{{locationDetails.description}}</p>
    <!--<a href ng-click="openLocationDetail(locationDetails)">_learn_more_about_ {{locationDetails.nameShort}}</a>-->
  </div>
  <view-more-images grid="4" class="has-no-link">
      <hero-slider data-has-notification-bar="false" on-slide-click="openGallery" data-counter-type="counter" content="previewImages"></hero-slider>

      <read-more ng-if="locationDetails.content.length && locationDetails.content[0].title">
        <p ng-bind-html="'_find_out_more_' | mainHeaderStyle"></p>
        <ul>
          <li ng-repeat="item in locationDetails.content | orderBy: 'order'"><a href="" ui-sref="locationInfo({regionSlug: regionSlug, locationSlug: locationDetails.meta.slug, infoSlug: item.slug})">{{item.title}}</a></li>
        </ul>
      </read-more>
    </view-more-images>
</section>

<header grid-row ng-if="regionDetails">
  <h1 grid="6">{{regionDetails.nameShort}}</h1>
</header>

<section grid-row ng-if="regionDetails">
  <div grid="8">
    <p>{{regionDetails.description}}</p>
  </div>
  <view-more-images grid="4">
    <a ng-if="regionDetails.images.length > 1" href class="gallery-link" ng-click="openGallery()">_view_more_images_</a>
    <hero-slider data-has-notification-bar="false" data-on-slide-click="openGallery" data-counter-type="counter" content="regionDetails.images"></hero-slider>
  </view-more-images>
  <hr>
</section>


  <section grid-container="9" widget="hotels" id="hotels">
    <header class="hotels__header">
      <h1 ng-bind-html="'_hotels_page_title_' | mainHeaderStyle"></h1>
      <ng-pluralize ng-if="config.displayHotelsCount" class="hotels-counter" count="(hotels|filter:hotelFilter).length" when="{'1': '1 _hotel_found_', 'other': '{} _hotels_found_'}"></ng-pluralize>
    </header>
    <div class="hotels__controls" ng-if="hasDates() && hotelAvailable() && showFilter('sort') && !filterConfig.displaySortInSidebar">
      <div class="order-switch">
        <select 
          name="sorting" 
          ng-model="currentOrder" 
          chosen 
          ng-options="option.name for option in sortingOptions" 
          disable-search="true" 
          ng-change="orderSwitchChange(currentOrder)"
          ng-init="initSortingOptions({
            'priceLowToHigh': '_price_low_to_high_',
            'priceHighToLow': '_price_high_to_low_',
            'availability': '_availability_',
            'starRatingLowToHigh': '_star_rating_low_to_high_',
            'starRatingHighToLow': '_star_rating_high_to_low_'
          })">
          <option></option> <!-- workaround for a bug in angular-chosen -->
        </select>
      </div>
    </div>
    <div ng-if="!isUserLoggedIn()" class="msg-box">_hotels_page_login_prompt_desc_</div>
    <div class="hotels__list">
      <section ng-show="hotels.length === 0">_no_hotels_found_</section>
      <ul class="entries entries--{{hotelViewMode}}">
        <li class="item" ng-repeat="hotel in hotels | filter : hotelFilter | orderBy : currentOrder.sort" grid="{{hotelViewMode === 'list' ? 3 : 1}}" ng-class="hotel.chainCode.toLowerCase()">
            <div class="item-image" ng-click="navigateToHotel(hotel.meta.slug)">
              <div class="banner" ng-if="hotel.merchandisingBanner" ng-style="{'background-color': hotel.merchandisingBanner.bgColor, 'color': hotel.merchandisingBanner.textColor}">{{hotel.merchandisingBanner.text}}</div>
              <img ng-src="{{hotel.images[0].uri | cloudinaryImage : 700 : 630 : 'fill'}}" alt="Mobius hotel {{hotel.name}} photo"/>
            </div>

            <h2 ng-if="hotelViewMode === 'list'" ng-click="navigateToHotel(hotel.meta.slug)">{{hotel.chainTitle}} <strong>{{hotel.nameShort}}</strong></h2>

            <h5 class="region-name" ng-if="config.displayHotelRegionName && hotelViewMode === 'list' && hotel.regionName">{{hotel.regionName}}</h5>

            <div class="ratings">
              <div class="brand" ng-if="displayPropertyChainBranding" ng-class="hotel.chainCode.toLowerCase()"></div>
              <div class="stars rating-trip-advisor img" ng-if="filterConfig.tripAdvisor">
                <a ng-href="{{hotel.tripAdvisorUrl}}" target="_blank"><img ng-src="{{hotel.tripAdvisorRatingUrl}}" alt="tripadvisor rating"></a>
              </div>

              <div class="rating-default" ng-if="filterConfig.stars && filterConfig.displayStarsOnHotels">
                <ul class="star-rating">
                  <li ng-repeat="i in [1,2,3,4,5]" ng-class="{'included': i <= hotel.rating}"></li>
                </ul>
              </div>
            </div>

            <h2 ng-if="hotelViewMode === 'tiles'" ng-click="navigateToHotel(hotel.meta.slug)">{{hotel.chainTitle}} <strong>{{hotel.nameShort}}</strong></h2>
            <h5 class="region-name" ng-if="config.displayHotelRegionName && hotelViewMode === 'tiles' && hotel.regionName">{{hotel.regionName}}</h5>

            <pricing-info>
              <p class="price available left" ng-if="hotel.available">
                _price_from_ <span class="value">{{hotel.priceFrom | i18nCurrency: $root.currencyCode}}</span> _per_night_
                <span ng-if="hotel.available && isUserLoggedIn() && hotel.minPointsRequired">
                  <br />_or_ <span class="value">{{hotel.minPointsRequired}}</span> _points_
                </span>
              </p>
              <p class="price unavailable" ng-if="!hasDates()">
                <button-submit ng-click="selectDates()">_select_dates_</button-submit>
              </p>

              <p class="price unavailable" ng-if="!hotel.available && hasDates()">
                _not_available_on_dates_title_
              </p>
              <button-submit role="button" tabindex="0" ng-click="navigateToHotel(hotel.meta.slug)">_view_more_</button-submit>
            </pricing-info>

            <p class="description">{{hotel.descriptionShort}}</p>
        </li>

        <li class="item filter-no-matches" ng-if="hotels">
          <div class="products-not-available">
            <div>
              <h3>_hotels_filter_no_result_title_</h3>
              <p>_hotels_filter_no_result_desc_</p>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </section>

  <aside grid-container="3" class="hotels__filter">
    <div class="view-switch">
      <h2>_filter_view_label_</h2>
      <ul>
        <li ng-class="{'is-active': hotelViewMode === 'list'}" ng-click="setHotelViewMode('list')">
          <i class="fa fa-th-list"  title="Show as list" /> _filter_list_label_
        </li>
        <li ng-class="{'is-active': hotelViewMode === 'tiles'}" ng-click="setHotelViewMode('tiles')">
          <i class="fa fa-th-large" title="Show as tiles" /> _filter_grid_label_
        </li>
      </ul>
    </div>
    <div class="filters-bar">

      <div ng-if="showFilter('sort') && hasDates() && filterConfig.displaySortInSidebar">
        <h3>_sorting_filter_placeholder_</h3>
        <select 
          name="sorting" 
          ng-model="currentOrder" 
          chosen 
          ng-options="option.name for option in sortingOptions" 
          disable-search="true" 
          ng-change="orderSwitchChange(currentOrder)"
          ng-init="initSortingOptions({
            'priceLowToHigh': '_price_low_to_high_',
            'priceHighToLow': '_price_high_to_low_',
            'availability': '_availability_',
            'starRatingLowToHigh': '_star_rating_low_to_high_',
            'starRatingHighToLow': '_star_rating_high_to_low_'
          })">
          <option></option> <!-- workaround for a bug in angular-chosen -->
        </select>
        <hr>
      </div>
    
      <div ng-if="hasDates() && showFilter('price') && hotelAvailable()">
        <!--<h2>_filter_label_</h2>-->
        <h3>_filter_price_per_night_label_</h3>
        <div
          range-slider
          min="minPrice"
          max="maxPrice"
          model-min="minSelectedPrice"
          model-max="maxSelectedPrice"
          show-values="true"
          filter="i18nCurrency"
          filter-options="{{$root.currencyCode}}"
          attach-handle-values="true"></div>
        <hr>
      </div>

      <div ng-show="showFilter('stars')">
        <h3>_filter_star_rating_label_</h3>
        <div class="stars">
          <ul class="stars-left">
            <li ng-repeat="stars in [1,2,3,4,5]" ng-click="setMinStars(stars)" ng-class="{included: stars <= minStars}"></li>
          </ul>
          _filter_range_separator_
          <ul class="stars-right">
            <li ng-repeat="stars in [1,2,3,4,5]" ng-click="setMaxStars(stars)" ng-class="{included: stars <= maxStars}"></li>
          </ul>
        </div>
        <hr>
      </div>


      <div ng-show="showFilter('tripAdvisor')">
        <h3><i class="logo-trip-advisor"></i> _filter_rating_label_</h3>
        <div class="stars rating-trip-advisor">
          <ul class="stars-left">
            <li ng-repeat="rating in [1,2,3,4,5]" ng-click="setMinRating(rating)" ng-class="{included: rating <= minRating}"></li>
          </ul>
          _filter_range_separator_
          <ul class="stars-right">
            <li ng-repeat="rating in [1,2,3,4,5]" ng-click="setMaxRating(rating)" ng-class="{included: rating <= maxRating}"></li>
          </ul>
        </div>
        <hr/>
      </div>

      <div ng-show="showFilter('chain') && hasDates()">
        <h3>_filter_chain_label_</h3>
        <select name="rate"
          required ng-model="chainFilter"
          disable-search="true"
          ng-change="onFilterChainChanged(chainFilter)"
          chosen ng-options="chain.code as chain.nameShort for chain in filterChains">
          <option value="">_filter_chain_label_</option> <!-- workaround for a bug in angular-chosen -->
        </select>
        <hr/>
      </div>

      <div ng-show="showFilter('rates') && hasDates()">
        <h3>_filter_rates_label_</h3>
        <select name="rate"
          required ng-model="rates.selectedRate"
          disable-search="true"
          ng-change="rates.onRateChanged()"
          chosen ng-options="rate as rate.name for rate in rates.all">
          <option></option> <!-- workaround for a bug in angular-chosen -->
        </select>
        <hr/>
      </div>

      <div ng-show="showFilter('tags') && hasDates()">
        <h3>_location_</h3>
        <ul class="check-boxes">
          <li ng-repeat="tag in filterTags">
            <input type="checkbox" ng-click="filterTag(tag)"> {{createTagFilterOptionLabel('_filter_tag_options_label_', tag.name)}}
          </li>
        </ul>
        <hr/>
      </div>

      <div class="reset-filters" ng-show="showFilter('reset')">
        <a href ng-click="resetFilters()">_reset_filters_</a>
      </div>
    </div>
  </aside>

