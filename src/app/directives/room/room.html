<section widget="room" grid>
  <header>
    <h1>{{roomDetails.name}}</h1>
    <p ng-bind-html="sanitize(roomDetails.description)"></p>
    <hr>
  </header>

  <div ng-if="products.length">
    <ul class="room-prices" >
        <li heading="{{product.name}}" ng-repeat="product in products">
          <img ng-src="{{product.icon}}" err-source="http://lorempixel.com/60/60" alt="{{product.name}}"/>
          <div>
            <h3>{{product.name}}</h3>
            <span>Earn {{product.price.pointsEarned}} points</span>
            <div ng-if="product._expanded">
              <div ng-bind-html="sanitize(product.description)"></div>
              <a href ng-click="showMore(product, false)">View less</a>
              <a href ng-click="openPriceBreakdownInfo(roomDetails, product)" ng-if="product.price.breakdowns.length">View Price Breakdown</a>
              <a href ng-click="openPoliciesInfo(product)" ng-if="product.policies">View Policies</a>
            </div>
            <div ng-if="!product._expanded">
              <p>{{product.descriptionShort}}</p>
              <a href ng-click="showMore(product, true)">View more</a>
            </div>
          </div>
          <div>
            <p class="desc">{{product.tagline}}</p>
            <p ng-show="product.memberOnly && !isUserLoggedIn()">Members Only Rate</p>
            <p ng-show="product.highlighted">Most Booked Package</p>
            <span class="price">
              <span class="value">{{product.price.totalBase | i18nCurrency: currencyCode}}</span> <span>per night</span>
            </span>
            <span ng-if="isUserLoggedIn()" class="price">
              or <span class="value">{{toPoints(product.price.totalBase)}}</span> <span>points</span>
            </span>
            <button ng-click="selectProduct(product)" ng-disabled="product.memberOnly && !isUserLoggedIn()">Select</button>
          </div>
        </li>
    </ul>
      <!-- TODO SYNC WITH V4-->
     <a class="button" ng-disabled="!selectedProduct" href ng-click="onContinue()">_continue_</a>
  </div>

  <div ng-if="products && !products.length">
    <h2>No Product Found</h2>
  </div>

  <div class="room-desc">
    <h3 class="section-title">Room <strong>Description</strong></h3>
    <p ng-bind-html="sanitize(roomDetails.description)"></p>
  </div>
  <div class="room-amenities">
    <h3 class="section-title">Room <strong>Amenities</strong></h3>
    <ul>
      <li ng-repeat="amenity in roomDetails.amenities">
        <i class="icon-{{amenity.icon || 'globe'}}"/>
        <span>{{amenity.name}}</span>
      </li>
    </ul>
  </div>
  <div class="other-rooms" ng-show="otherRooms.length > 1">
    <h3 class="section-title">Other <strong>Rooms</strong></h3>
    <ul>
      <li ng-repeat="otherRoom in otherRooms">
        <span>{{otherRoom.name}} from {{otherRoom.priceFrom | i18nCurrency: currencyCode}}</span>
        <a ui-sref="room({propertyCode: propertyCode, roomID: otherRoom.code})" class="more">_view_more_</a>
        <img ng-show="otherRoom.images[0]" ng-src="{{otherRoom.images[0].uri}}" alt="{{otherRoom.name}}">
      </li>
    </ul>
  </div>
</section>
