<section widget="room" grid>
  <header>
    <h1>{{roomDetails.name}}</h1>
    <p ng-bind-html="sanitize(roomDetails.description)"></p>
    <hr>
  </header>

  <div ng-if="products.length">
    <div class="room-prices" >
      <accordion close-others="true">
        <accordion-group heading="{{product.name}}" ng-init="isOpen = accordionStates[$index]" is-open="isOpen" is-disabled="isOpen" ng-class="{'is-open': isOpen}" ng-repeat="product in products">
          <accordion-heading>
            <div>
              <i class="icon icon-{{product.icon || 'star-1'}}"/>
              <header>
                <h3 class="title">{{product.name}}</h3>
                <p class="desc">{{product.tagline}}</p>
                <p>earn {{product.price.pointsEarned}} points</p>
              </header>
              <p ng-show="product.memberOnly && !isUserLoggedIn()">Members Only Rate</p>
              <p ng-show="product.highlighted">Most Booked Package</p>

              <p class="price">{{product.price.totalBase | i18nCurrency: $root.currencyCode}}</p>
              <small>per night</small>
              <p>or {{product.price.pointsRequired}} points</p>
            </div>
            <button ng-click="onSelectProduct(product)" ng-disabled="product.memberOnly && !isUserLoggedIn()">Click Me!</button>
          </accordion-heading>
          <p ng-bind-html="sanitize(product.description)"></p>
        </accordion-group>
      </accordion>
    </div>

    <div class="room-continue">
      <a class="button" ng-disabled="!selectedProduct" ui-sref="reservation.details">_continue_</a>
    </div>
  </div>

  <div ng-if="products && !products.length">
    <h2>No Product Found</h2>
  </div>

  <div class="room-desc">
    <h3 class="section-title">Room <strong>Description</strong></h3>
    <p ng-bind-html="sanitize(roomDetails.description)"></p>
  </div>
  <div class="room-amenities">
    <h3 class="section-title">Room <strong>Amenities</strong></h3>
    <ul>
      <li ng-repeat="amenity in roomDetails.amenities">
        <i class="icon-{{amenity.icon || 'globe'}}"/>
        <span>{{amenity.name}}</span>
      </li>
    </ul>
  </div>
  <div class="other-rooms" ng-show="otherRooms.length > 1">
    <h3 class="section-title">Other <strong>Rooms</strong></h3>
    <ul>
      <li ng-repeat="otherRoom in otherRooms">
        <div ng-click="onClickOnAssociatedRoom(otherRoom)">
          <span>{{otherRoom.name}} from {{otherRoom.priceFrom | i18nCurrency: currencyCode}}</span>
          <a class="more">_view_more_</a>
          <img ng-show="otherRoom.images[0]" ng-src="{{otherRoom.images[0].uri}}" alt="{{otherRoom.name}}">
        </div>
      </li>
    </ul>
  </div>
</section>
