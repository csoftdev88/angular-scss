<hero-slider content="heroContent"></hero-slider>

<breadcrumbs></breadcrumbs>

<main class="grid-wrapper">

  <div class="preloader" ng-show="preloader.visible"></div>

  <offers-list grid-row ng-if="!showDetail">

    <offer-item ng-repeat="offer in offersList track by $index" ng-click="goToDetail(offer.code)">
      <img ng-src="{{offer.image.uri | cloudinaryImage : 310 : 160 : 'fill'}}" alt="{{offer.image.alt}}"/>

      <section>
        <h2>{{offer.title}}</h2>
        <div ng-bind-html="offer.subtitle"></div>
      </section>

      <span>Read more</span>
    </offer-item>

  </offers-list>

  <offer-detail grid-row ng-if="showDetail">
    <div grid="12">
      <h1 ng-bind-html="selectedOffer.title"></h1>
      <img ng-src="{{selectedOffer.image.uri | cloudinaryImage : 960}}" alt="{{selectedOffer.image.uri}}"/>
      <div class="offer-content" ng-bind-html="selectedOffer.text"></div>

      <button-back role="button" tabindex="0" ng-click="goToOffersList()">Back</button-back>
      <button-submit ui-sref="hotels({promoCode: selectedOffer.promoCode})">Book Now</button-submit>

      <hr>

      <h2 ng-if="offersList.length > 1">You may also be interested in:</h2>
      <offers-list ng-if="offersList.length > 1">
        <offer-item ng-repeat="offer in offersList | filter:getRelevant track by $index"  ng-click="goToDetail(offer.code)">
          <img ng-src="{{offer.image.uri | cloudinaryImage : 310 : 160 : 'fill'}}" alt="{{offer.image.uri}}"/>

          <section>
            <h2>{{offer.title}} </h2>
            <div ng-bind-html="offer.subtitle"></div>
          </section>

          <span>Read more</span>
        </offer-item>
      </offers-list>
    </div>

  </offer-detail>
</main>
