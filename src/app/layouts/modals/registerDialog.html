<div class="ui-dialog">
  <div class="modal-header has-form">
    <h3 class="modal-title">Register</h3>
    <button class="button-close" ng-click="cancel()">X</button>
  </div>

  <div class="modal-body">
    <div class="form-wrap" ng-switch="registrationStep">
      <div ng-switch-when="0">
        <form name="stepOneForm" ng-submit="stepOneForm.$valid">
          <label for="login-email">
            Email
            <input id="login-email" type="email" ng-class="{'is-invalid': stepOneForm.submitted && (stepOneForm.email.$error.email || stepOneForm.email.$error.pattern || stepOneForm.password.$error.required)}" name="email" ng-model="formData.email" required ng-pattern="emailPattern">
          </label>
          <span ng-show="stepOneForm.submitted && (stepOneForm.email.$error.email || stepOneForm.email.$error.pattern)">Please enter valid email</span>
          <span ng-show="stepOneForm.submitted && stepOneForm.email.$error.required">Email is required</span>

          <label for="login-email-confirm">
            Confirm Email
            <input id="login-email-confirm" type="text" ng-class="{'is-invalid': stepOneForm.emailConfirm.$error.match}" name="emailConfirm" ng-model="confirmData.email" match="formData.email">
          </label>
          <span ng-show="stepOneForm.submitted && stepOneForm.emailConfirm.$error.match && stepOneForm.emailConfirm.$pristine">Email fields do not match</span>

          <label for="login-password">
            Password
            <input id="login-password" type="password" ng-class="{'is-invalid': stepOneForm.submitted && (stepOneForm.loginPassword.$error.required || stepOneForm.loginPassword.$error.complexity)}" name="loginPassword " ng-model="formData.password" required password-pattern >
          </label>
          <span ng-show="stepOneForm.submitted && stepOneForm.loginPassword.$error.required">Password is required</span>
          <span ng-show="stepOneForm.submitted && stepOneForm.loginPassword.$error.complexity">Password is not valid</span>
          <label for="login-password-confirm">
            Confirm Password
            <input id="login-password-confirm" type="password" ng-class="{'is-invalid': stepOneForm.passwordConfirm.$error.match}" name="passwordConfirm" ng-model="confirmData.password" match="formData.password">
          </label>
          <span ng-show="stepOneForm.submitted && stepOneForm.passwordConfirm.$error.match && stepOneForm.passwordConfirm.$pristine">Password fields do not match</span>
          </label>
        </form>
        <span>Your password should be at least 8 characters and contain at least 1 number and 1 symbol</span>
        <div class="modal-footer">
          <button class="button" ng-click="register(stepOneForm)">Continue</button>
        </div>
      </div>

      <div ng-switch-when="1">
        <a ng-click="goBack()">Back</a>
        <form name="stepTwoForm" ng-submit="stepTwoForm.$valid">
          <label for="login-name">
            Name
            <input type="text" id="login-name" ng-model="formData.firstName">
          </label>
          <label for="login-surname">
            Surname
            <input type="text" id="login-surname" ng-model="formData.lastName">
          </label>
          <label for="terms">
            I agree to the </label><a href="/404" target="_blank">Terms and conditions</a>
            <input type="checkbox" id="terms" name="terms" required="required">

          <label for="privacy-policy">
            I agree with the  </label><a href="/404" target="_blank">Privacy policy</a>
            <input type="checkbox" id="privacy-policy" name="policy"  ng-model="policy" required="required" >

          <span ng-show="stepTwoForm.submitted && (stepTwoForm.terms.$error.required || stepTwoForm.policy.$error.required)">You have to agree with the Terms and conditions and the Privacy policy</span>
        </form>
        <!-- todo: checkboxes -->
        
         <div class="modal-footer">
          <button class="button" ng-click="register(stepTwoForm)">Continue</button>
        </div>
      </div>

      <div ng-switch-when="2">
        <div class="modal-footer">
          <button class="button" ng-click="cancel()">Finish</button>
        </div>
      </div>
    </div>
  </div>


</div>
