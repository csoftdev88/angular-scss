<!-- New layout - Delete old layout below when this is complete -->
<section class="hotel-detail__rooms" ng-if="rooms.length" grid-row>
  <hr />
  <div grid="12" id="jsRooms">
    <header class="section-header">
      <h2>Our <strong>Rooms</strong></h2>
      <p ng-if="availableRooms && availableRooms.length === 0">No room available, please change your search criteria</p>

      <pricing-switch>
        <a href ng-class="{'is-active': pricePer === PP_NIGHT}" ng-click="setPricePer(PP_NIGHT)">Per Night</a>
        |
        <a href
           ng-class="{'is-active': pricePer === PP_STAY, 'is-disabled': !days}"
           ng-click="days && setPricePer(PP_STAY)"
           title="{{ days ? '': 'Please select dates to enable per stay pricing'}}">
          Per Stay
        </a>
      </pricing-switch>
    </header>

    <list-items class="rooms-list" ng-init="roomLimit = 4">
      <list-item ng-repeat="room in rooms | orderBy: 'priceFrom' | limitTo: roomLimit">
        <header class="item-header">
          <h3><a href ng-click="goToRoom(details.meta.slug, room.meta.slug)" ng-bind-html="room.name | mainHeaderStyle"></a></h3>
          <earned-points ng-if="isUserLoggedIn() && room.minsPointsEarned">Earn at least
            <ng-pluralize count="room.minsPointsEarned" when="{'1': '{} point', 'other': '{} points'}"></ng-pluralize>
          </earned-points>
        </header>

        <div class="list-item-container">
          <!-- Room info -->
          <div class="list-item-info">
            <img class="room-image desktop" ng-click="goToRoom(details.meta.slug, room.meta.slug)" ng-src="{{room.images[0].uri | cloudinaryImage : 150 : 150 : 'fill'}}" alt="{{room.name}}">
            <img class="room-image mobile" ng-click="goToRoom(details.meta.slug, room.meta.slug)" ng-src="{{room.images[0].uri | cloudinaryImage : 768 : 384 : 'fill'}}" alt="{{room.name}}">

            <ul class="amenities">
              <li class="amenity" ng-repeat="amenity in room.amenities | limitTo:3">
                <slug-img slug="amenity.slug" type="room" width="15"></slug-img>
                <span class="amenity-caption">{{amenity.name}}</span>
              </li>
            </ul>

            <description-info class="overflow">
              <div ng-bind-html="sanitize(room.description)"></div>
            </description-info>
            <a href ng-click="goToRoom(details.meta.slug, room.meta.slug)">Read More About this Room</a>
          </div>

          <room-products ng-if="details">
          </room-products>

        </div>
        <!-- //list-item-container -->
      </list-item>

      <a href class="read-more-rooms" ng-show="roomLimit && roomLimit < rooms.length" ng-click="roomLimit = rooms.length">View more rooms</a>

    </list-items>
    <h2 ng-if="!rooms.length">_no_room_found_</h2>
  </div>
</section>
