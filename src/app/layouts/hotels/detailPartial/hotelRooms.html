<section class="hotel-detail__rooms" ng-if="rooms.length" grid-row>
  <hr />
  <div grid="12" id="jsRooms">
    <h2>Our <strong>Rooms</strong></h2>
    <list-items class="rooms-list" ng-if="rooms.length" ng-init="roomLimit = 4">
      <p ng-if="availableRooms && availableRooms.length === 0">No room available, please change your search criteria</p>
      <pricing-switch>
        <a href ng-class="{'is-active': pricePer === PP_NIGHT}" ng-click="setPricePer(PP_NIGHT)">Per Night</a>
        |
        <a href
           ng-class="{'is-active': pricePer === PP_STAY, 'is-disabled': !days}"
           ng-click="days && setPricePer(PP_STAY)"
           title="{{ days ? '': 'Please select dates to enable per stay pricing'}}">
          Per Stay
        </a>
      </pricing-switch>
      <list-item ng-repeat="room in rooms | orderBy: 'priceFrom' | limitTo: roomLimit">
        <a ng-click="goToRoom(details.meta.slug, room.meta.slug)">
          <figure>
            <img ng-src="{{room.images[0].uri | cloudinaryImage : 430 : 286 : 'fill'}}" alt="{{room.name}}">
          </figure>
        </a>

        <div class="list-item-header">
          <h3><a ng-click="goToRoom(details.meta.slug, room.meta.slug)" ng-bind-html="room.name | mainHeaderStyle"></a></h3>

          <pricing-info>
            <div ng-if="!availableRooms || availableRooms.indexOf(room.code) > -1">
              <p class="price-form" ng-if="room.priceFrom" itemprop="priceRange">
                from <span class="value">{{(room.priceFrom * (pricePer === PP_STAY ? days : 1)) | i18nCurrency: currencyCode}}</span>
                <span ng-if="pricePer === 'night'">per night</span><span ng-if="pricePer === PP_STAY">per stay</span>
              <span ng-if="isUserLoggedIn() && room.minPointsRequired">
                <br />or <span class="value">{{(room.minPointsRequired * (pricePer === PP_STAY ? days : 1))}}</span> points
              </span>
              </p>
              <p class="unavailable" ng-if="!room.priceFrom">Please select dates to see the latest price</p>
            </div>
            <p class="unavailable" ng-if="availableRooms && availableRooms.indexOf(room.code) < 0" class="error"><span>Not Available on Selected Dates</span></p>
          </pricing-info>

          <earned-points ng-if="isUserLoggedIn() && room.minsPointsEarned">Earn at least
            <ng-pluralize count="room.minsPointsEarned" when="{'1': '{} point', 'other': '{} points'}"></ng-pluralize>
          </earned-points>
        </div>

        <pricing-info>
          <div ng-if="!availableRooms || availableRooms.indexOf(room.code) > -1">
            <p class="price-form" ng-if="room.priceFrom" itemprop="priceRange">
              from <span class="value">{{getValuePer(room.priceFrom) | i18nCurrency: currencyCode}}</span>
              <span ng-if="pricePer === 'night'">per night</span><span ng-if="pricePer === PP_STAY">per stay</span>
              <span ng-if="isUserLoggedIn() && room.minPointsRequired">
                <br />or <span class="value">{{getValuePer(room.minPointsRequired)}}</span> points
              </span>
            </p>

            <p class="unavailable" ng-if="!room.priceFrom">Please select dates to see the latest price</p>

            <a ng-click="goToRoom(details.meta.slug, room.meta.slug)" class="button">View Details</a>
          </div>
          <p class="unavailable" ng-if="availableRooms && availableRooms.indexOf(room.code) < 0" class="error"><span>Not Available on Selected Dates</span></p>
        </pricing-info>

        <description-info>
          <div ng-bind-html="sanitize(room.description)"></div>
        </description-info>
        <div class="wide-button">
          <a class="button" ng-click="goToRoom(details.meta.slug, room.meta.slug)">View Details</a>
        </div>
      </list-item>
      <a href class="read-more-rooms" ng-show="roomLimit && roomLimit < rooms.length" ng-click="roomLimit = rooms.length">View more rooms</a>
    </list-items>
    <h2 ng-if="!rooms.length">_no_room_found_</h2>
  </div>
</section>
