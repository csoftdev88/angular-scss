<hero-slider content="heroContent"></hero-slider>

<breadcrumbs></breadcrumbs>

<main typo-grid class="grid-wrapper">

  <h3>Fill out <strong>your billing information</strong></h3>
  <reservation-billing>
    <div ng-switch="billingDetails.paymentMethod">
      <ul class="payment-methods">
        <li ng-repeat="cardIcon in creditCardsIcons" ng-click="selectPaymentMethod('cc')">
          <i class="{{cardIcon}}" ng-class="{selected: getCreditCardDetails(billingDetails.card.number).icon === cardIcon}"></i>
        </li>
        <li class="divider"></li>
        <li ng-click="selectPaymentMethod('point')">
          <i class="points" ng-class="{selected: billingDetails.paymentMethod == 'point'}"></i>
        </li>
      </ul>
      <section class="payment-points" ng-switch-when="point">
        <table>
          <tr>
            <th>Current points:</th>
            <td>{{pointsData.currentPoints}}</td>
          </tr>
          <tr>
            <th>Points required for booking:</th>
            <td>-{{selectedProduct.price.pointsRequired}}</td>
          </tr>
          <tr>
            <th>Points earned for booking:</th>
            <td class="earned">+{{pointsData.pointsEarned}}</td>
          </tr>
          <tr class="balance">
            <th>Your balance after this booking:</th>
            <td ng-class="{'not-enough': pointsData.pointsAfterBooking < 0}">{{pointsData.pointsAfterBooking}}</td>
          </tr>
        </table>
        <div class="error" ng-show="pointsData.pointsAfterBooking < 0">Sorry, you don't have enough points to perform this purchase.</div>
      </section>
      <section class="payment-card" ng-switch-default>
        <form name="forms.billing" novalidate ng-submit="forms.billing.$valid && continue()">

          <label for="form-card-number" class="card-type">
            <input type="text" id="form-card-number" credit-card-check required
              placeholder="xxxx-xxxx-xxxx-xxxx"
              ng-model="billingDetails.card.number" />
            <span>Card number</span>
          </label>

          <div class="input-left">
            <label for="form-expires" class="input-left">
              <input type="text" id="form-expires" month-picker required
                placeholder="YYYY-MM"
                ng-min="expirationMinDate"
                ng-model="billingDetails.card.expirationDate" />
              <span>Expires</span>
            </label>

            <label for="form-cvv" class="input-right">
              <input type="text" id="form-cvv" required
                placeholder="CVV"
                ng-min="100"
                ng-max="999"
                ng-model="billingDetails.card.securityCode" />
              <span>CVV <span class="help" ng-click="openCCVInfo()"/></span>
            </label>
          </div>

          <label for="form-name-on-card" class="input-right">
            <input type="text" id="form-name-on-card" required
              placeholder="John Doe"
              ng-model="billingDetails.card.holderName" />
            <span>Name on Card</span>
          </label>

          <label for="form-guest-address" class="input-checkbox">
            <input type="checkbox" id="form-guest-address"
              ng-model="billingDetails.useGuestAddress" />
            Use Guest Address
          </label>

          <div ng-if="!billingDetails.useGuestAddress">
            <label for="address">
              <input type="text" id="address" required
                placeholder="Address"
                ng-model="billingDetails.address" />
              <span>Address</span>
            </label>

            <label for="city" class="input-left">
              <input type="text" id="city" required
                placeholder="City"
                ng-model="billingDetails.city" />
              <span>City</span>
            </label>

            <label for="state" class="input-right">
              <input type="text" id="state" placeholder="State/Province" required
                placeholder="State / Province"
                ng-model="billingDetails.stateProvince" />
              <span>State / Province</span>
            </label>

            <label for="country">
              <input type="text" id="country" required
                placeholder="Country"
                ng-model="billingDetails.country" />
              <span>Country</span>
            </label>

            <label for="postal-code" class="input-left">
              <input type="text" id="postal-code" required
                placeholder="Zip / Postal Code"
                ng-model="billingDetails.zip" />
              <span>Zip / Postal Code</span>
            </label>

            <label for="telephone" class="input-right">
              <input type="text" id="telephone" required
                placeholder="Telephone"
                ng-model="billingDetails.phone" />
              <span>Telephone</span>
            </label>
          </div>

          <label class="form-errors centered" ng-if="forms.billing.$invalid">
            Please fill out all the fields indicated
          </label>

        </form>
      </section>
    </div>
  </reservation-billing>
</main>
