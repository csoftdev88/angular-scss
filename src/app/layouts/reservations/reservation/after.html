<reservation-finished>
  <section grid-row class="reservation-summary">
    <header>
      <h1 grid="4">{{property.nameLong}}</h1>

      <div grid="4" class="reference">
        <p>Your reference:</p>
        <p>{{reservation.reservationCode}}</p>
      </div>

      <div grid="4" class="booked">
        Booked: {{reservation.bookDate | dateTime: 'D MMM YYYY'}}
      </div>
    </header>

    <div class="actions">
      <p>Add to Passbook</p>
      <p>Print</p>
    </div>

    <div class="reservation-data">
      <figure grid="4">
        <img ng-src="{{roomDetails.images[0].URI}}" alt="{{roomDetails.name}}">
        <button>Modify</button>
        <button>Cancel</button>
      </figure>

      <div grid-container="8">
        <div grid="8">
          <h3>{{roomDetails.name}}</h3>
          <h4>{{selectedProduct.name}}</h4>
        </div>

        <table class="data" grid="4">
          <tbody>
            <tr>
              <th>Check in:</th>
              <td>{{bookingDetails.from | dateTime}}</td>
              <th>Adults:</th>
              <td>{{bookingDetails.adults || 0}}</td>
            </tr>
            <tr>
              <th>Check out:</th>
              <td>{{bookingDetails.to | dateTime}}</td>
              <th>Children:</th>
              <td>{{bookingDetails.children || 0}}</td>
            </tr>
          </tbody>
        </table>

        <table class="charges" grid="4">
          <tbody>
            <tr ng-switch="billingDetails.paymentMethod">
              <th>Room Charges: {{billingDetails.paymentMethod}}</th>
              <td>{{selectedProduct.price.totalBase | i18nCurrency: currencyCode}}</td>
              <th rowspan="4">Total:</th>
              <td rowspan="4" class="total-value">
                <a href
                  ng-switch-when="cc"
                  ng-click="openPriceBreakdownInfo(selectedProduct)">{{selectedProduct.price.totalAfterTax | i18nCurrency: $root.currencyCode}}</a>
                <a href
                  ng-switch-when="point"
                  ng-click="openPriceBreakdownInfo(selectedProduct)">{{selectedProduct.price.pointsRequired}} points</a>
              </td>
            </tr>

            <!-- Additional taxes -->
            <tr ng-if="selectedProduct.price.totalAdditionalTaxes">
              <th>Taxes:</th>
              <td>{{selectedProduct.price.totalAdditionalTaxes | i18nCurrency: $root.currencyCode}}</td>
            </tr>

            <!-- Additional fees -->
            <tr ng-if="selectedProduct.price.totalAdditionalFees">
              <th>Fees:</th>
              <td>{{selectedProduct.price.totalAdditionalFees | i18nCurrency: $root.currencyCode}}</td>
            </tr>

            <!-- Discount -->
            <tr ng-if="selectedProduct.price.totalDiscount">
              <th>Discount:</th>
              <td>{{selectedProduct.price.totalDiscount | i18nCurrency: $root.currencyCode}}</td>
            </tr>

          </tbody>
        </table>
      </div>
      <footer>
        <a href ng-click="readPolicies()">View Policies</a>
      </footer>
    </div>
  </section>

  <hr>

  <section grid-row class="reservation-enhance">
    <h3>Enhance Your Stay With</h3>

    <ul>
      <li ng-repeat="addon in addons" ng-if="reservation.packages.indexOf(addon.code) === -1">
        <a href ng-click="openAddonDetailDialog(addon)">
          <img src="addon.images[0].uri" err-source="http://lorempixel.com/390/110/" />
        </a>
        <h4>{{addon.name}}</h4>
        <div ng-if="addon._expanded">
          <p>{{addon.description}}</p>
          <a href ng-click="addon._expanded = false">[-]</a>
        </div>
        <div ng-if="!addon._expanded">
          <p>{{addon.descriptionShort}}</p>
          <a href ng-click="addon._expanded = true">[+]</a>
        </div>
        <p>Add to your booking with one click:</p>
        <a class="button" href ng-click="openAddonDetailDialog(addon)">{{addon.price | i18nCurrency: currencyCode}}</a>
        <a class="button" href ng-click="openAddonDetailDialog(addon)" ng-if="addon.pointsRequired">{{addon.pointsRequired}}</a>
      </li>
    </ul>
  </section>

  <hr>

  <section grid-row="" class="reservation-hotel-details">
    <hotel-location hotel-details="property"></hotel-location>
  </section>

  <hr>

  <section grid-row class="reservation-enhancements">
    <h3>Your Enhancements</h3>

    <ul ng-if="reservation.packages.length">
      <li ng-repeat="addonCode in reservation.packages">
        <img src="addons[addonCode].images[0].uri" err-source="http://lorempixel.com/390/110/" />
        <h4>{{addons[addonCode].name}}</h4>
        <div ng-if="addons[addonCode]._expanded">
          <p>{{addons[addonCode].description}}</p>
          <a href ng-click="addons[addonCode]._expanded = false">View Less</a>
        </div>
        <div ng-if="!addons[addonCode]._expanded">
          <p>{{addons[addonCode].descriptionShort}}</p>
          <a ng-if="addon.hasViewMore" href ng-click="addons[addonCode]._expanded = true">View More</a>
        </div>
        <p>{{addon.price | i18nCurrency: currencyCode}}</p>
      </li>
      <li>
        <p>Total: {{getPackagesPrice() | i18nCurrency: currencyCode}}</p>
      </li>
    </ul>
    <p ng-if="!reservation.packages.length">No enhancements chosen</p>
  </section>
</reservation-finished>
