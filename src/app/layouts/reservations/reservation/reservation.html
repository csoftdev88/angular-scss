<!-- NAVIGATION -->
<reservation-steps>
  <ol>
    <li ng-class="{'is-active': state.current.name === 'reservation' || state.current.name === 'reservation.details'}"><a>Guest Details</a></li>
    <li ng-class="{'is-active': state.current.name === 'reservation.billing'}"><a>Billing Information</a></li>
    <li ng-class="{'is-active': state.current.name === 'reservation.confirmation'}"><a>_confirmation_</a></li>
  </ol>
</reservation-steps>

<!-- RESERVATION DETAILS -->
<div widget="reservation" grid="7">
  <reservation-room-resume ng-if="selectedProduct && roomDetails">
    <h3>Your Room Selection</h3>
    <div class="room-data">
      <img ng-src="{{roomDetails.images[0].URI}}" alt="{{roomDetails.name}}">
      <h4>{{roomDetails.name}}</h4>
      <p class="desc">{{selectedProduct.name}}</p>
      <p class="price"><strong>{{selectedProduct.price.totalBase | i18nCurrency: currencyCode}}</strong> <em>per night</em></p>
    </div>
    <div class="reservation-data">
      <table class="data">
        <tbody>
          <tr>
            <th>Check in:</th>
            <td>{{bookingDetails.from | dateTime}}</td>
          </tr>
          <tr>
            <th>Check out:</th>
            <td>{{bookingDetails.to | dateTime}}</td>
          </tr>
          <tr>
            <th>Adults:</th>
            <td>{{bookingDetails.adults || 0}}</td>
          </tr>
          <tr>
            <th>Children:</th>
            <td>{{bookingDetails.children || 0}}</td>
          </tr>
        </tbody>
      </table>

      <table class="charges">
        <tbody>
          <tr>
            <th>Room Charges:</th>
            <td>{{selectedProduct.price.totalBase | i18nCurrency: currencyCode}}</td>
          </tr>

          <tr>
            <th>Tax:</th>
            <td>{{ selectedProduct.price.totalAfterTax - selectedProduct.price.totalBase | i18nCurrency: $root.currencyCode}}</td>
          </tr>

          <!-- Additional taxes -->
          <tr ng-if="selectedProduct.price.totalAdditionalTaxes">
            <th>Additional Taxes:</th>
            <td>{{selectedProduct.price.totalAdditionalTaxes | i18nCurrency: $root.currencyCode}}</td>
          </tr>

          <!-- Additional fees -->
          <tr ng-if="selectedProduct.price.totalAdditionalFees">
            <th>Additional Fees:</th>
            <td>{{selectedProduct.price.totalAdditionalFees | i18nCurrency: $root.currencyCode}}</td>
          </tr>

           <!-- Additional fees -->
          <tr ng-if="selectedProduct.price.totalDiscount">
            <th>Discount:</th>
            <td>{{selectedProduct.price.totalDiscount | i18nCurrency: $root.currencyCode}}</td>
          </tr>

          <tr>
            <th>Total:</th>
            <td>{{selectedProduct.price.totalAfterTax | i18nCurrency: $root.currencyCode}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <p class="more-details">
      <a href ng-click="openPriceBreakdownInfo()">View Price Breakdown</a>
      <a href ng-click="readPolicies()">View Policies</a>
    </p>
  </reservation-room-resume>

  <hr/>

  <span class="alert-warning" ng-if="invalidFormData">
    We are sorry, your payment was not authorized. Please check your details and try again.
  </span>

  <registration-call ng-if="!isUserLoggedIn()">
    <h4>Already Registered?</h4>
    <p>Click here to <a href ng-click="openLoginDialog()">log in</a> or <a href ng-click="openRegisterDialog()">register</a>.</p>
  </registration-call>

  <hr/>
  <!-- SUBVIEWS -->
  <ui-view>
  </ui-view>
</div>
